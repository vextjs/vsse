# 项目状态（STATUS / ROADMAP）

## 能力矩阵（当前）
- [x] 聊天对话（OpenAI，非流式）
- [x] 流式对话（Replicate + SSE）
- [x] 右侧需求卡渲染（SSE 推送 HTML）
- [x] 航班 JSON → HTML 渲染
- [x] **主动建立 SSE 连接**（v0.1.6 新增）- 无需 POST 请求即可建立连接
- [x] **SSE 连接自定义请求头支持**（v0.1.4 新增）
- [x] **Bearer Token 自动注入到 SSE 连接**（v0.1.4 新增）
- [x] **完整的 CORS 和跨域认证支持**（v0.1.4 新增）
- [ ] 单元测试与契约测试
- [ ] CI（Windows + Ubuntu）
- [ ] 账号体系与会话持久化

## 路线图（计划）
- 近期（0.1.x）
    - ~~移除硬编码密钥，统一使用环境变量~~
    - ~~增加 SSE 连接自定义请求头支持~~（✅ 已完成 v0.1.4）
    - ~~增加主动建立 SSE 连接能力~~（✅ 已完成 v0.1.6）
    - 增加 API 合同测试与 SSE 行为测试
    - 文档与类型声明完善
- 中期（0.2.x）
    - 引入缓存与并发去重（inflight 合并）
    - 性能与慢查询日志（命中率、p95 指标）
    - 提供原生 EventSource 和 Polyfill 的选择配置
- 远期（1.x）
    - 稳定公开 API，发布初版
    - 提供插件化模型供应商适配
    - 支持多种 SSE 传输模式（包括 fetch + ReadableStream 自解析）

## v0.1.6 重要更新
- **新增功能**: `connect()` 方法支持主动建立 SSE 连接，无需通过 POST 或监听器
- **使用场景**: 纯服务端推送、预连接优化、实时通知系统、多频道订阅
- **内部优化**: 将连接逻辑拆分为 `maybeConnect()` 和 `forceConnect()`
- **文档更新**: 新增完整的 API 方法说明和使用示例
- **演示页面**: 新增 `demo-connect.html` 展示主动连接功能

## v0.1.4 重要更新
- **突破性功能**: 支持 SSE 连接自定义请求头，解决了原生 EventSource 的限制
- **认证增强**: 全局 `token` 现在会自动添加到 SSE 连接
- **架构改进**: 从原生 EventSource 升级到 EventSourcePolyfill
- **文档完善**: 全面更新了使用指南和最佳实践
- **向下兼容**: 100% 保持原有 API 兼容性

注：路线图更新需同步 CHANGELOG 的 [Unreleased]。
